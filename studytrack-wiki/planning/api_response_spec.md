# 📘 API 응답 표준 규격

API 응답에 대한 표준 형식을 정의합니다. 모든 REST API는 동일한 응답 포맷을 사용해야 합니다.

---

## ✅ 공통 응답 구조

모든 API는 다음과 같은 JSON 객체를 반환합니다.

| 필드 | 타입 | 설명 |
|---|---|---|
| `guid` | String | 요청 또는 응답의 고유 식별자 (예: G2025090410300012) |
| `resultCode` | String(5자리) | 결과 코드 (예: `00000`) |
| `resultMessage` | String | 처리 결과에 대한 설명 메시지 |
| `data` | Object / Array / Primitive | API 별 실제 응답 데이터 |

### ✅ 응답 예시
```json
{
  "guid": "G2025090410300012",
  "resultCode": "00000",
  "resultMessage": "작업이 성공적으로 완료되었습니다.",
  "data": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "email": "user@example.com"
  }
}
```

---

## ✅ resultCode 체계

`resultCode`는 5자리 문자열이며, 다음과 같은 규칙을 따릅니다:

```
[대분류][중분류][소분류][일련번호]
1자리   1자리    1자리     2자리
```

### 대분류 (첫 번째 자리)
- `0` : 성공 (Success)
- `4` : 클라이언트 오류 (잘못된 요청, 인증 실패 등)
- `5` : 서버 오류 (내부 오류, 외부 서비스 오류 등)
- `9` : 공통/기타 오류 (예약 코드)

### 중분류 (두 번째 자리)
- `0xxx` : 일반 성공
- `40xx` : 기본 클라이언트 오류 (입력값, 형식 등)
- `41xx` : 인증/권한 오류
- `42xx` : 레이트 리미팅/요청 과다 오류
- `43xx` : 비즈니스 로직 오류
- `50xx` : 일반 서버 오류
- `51xx` : 외부 서비스 연동 오류

---

## ✅ 표준 코드 목록

### 성공 코드 (0xxxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 00000 | 작업이 성공적으로 완료되었습니다 | 모든 성공 응답 기본 코드 |

### 기본 클라이언트 오류 (40xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 40001 | 잘못된 요청 형식입니다 | JSON 형식 오류, 파싱 불가 |
| 40002 | 필수 파라미터가 누락되었습니다 | 필수 필드 누락 |
| 40003 | 입력값이 유효하지 않습니다 | 정규식/범위 검증 실패 |

### 인증/권한 오류 (41xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 41001 | 로그인이 필요합니다 | 토큰 없음 |
| 41002 | 세션이 만료되었습니다 | 토큰 만료 |
| 41003 | 접근 권한이 없습니다 | 권한 부족 |
| 41004 | 유효하지 않은 인증 정보입니다 | 잘못된 토큰/자격 증명 |

### 레이트 리미팅 오류 (42xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 42001 | 요청 횟수를 초과했습니다 | API 호출 제한 |
| 42002 | 일정 시간 후 재시도 가능합니다 | 재시도 필요 |

### 비즈니스 로직 오류 (43xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 43001 | 이미 존재하는 데이터입니다 | 이메일, 닉네임 중복 등 |
| 43002 | 존재하지 않는 데이터입니다 | 조회 실패 |
| 43003 | 비활성화된 계정입니다 | 정지/탈퇴 계정 접근 |

### 서버 오류 (50xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 50001 | 서버 내부 오류가 발생했습니다 | 예기치 못한 오류 |
| 50002 | 데이터베이스 처리 중 오류가 발생했습니다 | DB 연결/쿼리 실패 |
| 50003 | 파일 처리 중 오류가 발생했습니다 | 업로드/다운로드 실패 |

### 외부 서비스 오류 (51xxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 51001 | 외부 서비스 연동 오류가 발생했습니다 | 외부 API 호출 실패 |
| 51002 | 이메일 발송에 실패했습니다 | 메일 서버 오류 |
| 51003 | SMS 발송에 실패했습니다 | SMS 서비스 오류 |

### 공통/기타 오류 (9xxxx)
| 코드 | 메시지 | 설명 |
|------|--------|------|
| 99997 | 토큰 오류 | 만료, 무효, 형식 오류 |
| 99998 | 파라미터 오류 | 형식, 누락, 범위 오류 |
| 99999 | 정의되지 않은 오류 | 미분류 오류 |

---

## ✅ 사용 가이드라인

1. **코드 할당 원칙**
   - 새로운 오류 코드가 필요하면 기존 정의 확인 후 재사용 검토
   - 새 코드 추가 시 반드시 본 문서에 등록
   - 동일 오류 상황에는 동일 코드 사용

2. **메시지 작성 원칙**
   - 사용자가 이해하기 쉬운 한국어로 작성
   - 구체적이고 실행 가능한 안내 포함
   - 보안상 민감한 정보는 노출하지 않음

3. **HTTP 상태 코드와의 관계**
   - `resultCode`는 HTTP 상태 코드와 함께 사용됨
   - 예시:

```http
HTTP 400 Bad Request
{
  "guid": "G2025090410450099",
  "resultCode": "40002",
  "resultMessage": "필수 파라미터가 누락되었습니다",
  "data": {}
}
```

4. **예약 구간**
   - `60xxx` ~ `69xxx` : 결제 관련 오류
   - `70xxx` ~ `79xxx` : 콘텐츠 관련 오류
   - `80xxx` ~ `89xxx` : 알림 관련 오류
   - `90xxx` ~ `98xxx` : 기타 비즈니스 로직 오류

---

## ✅ 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2025-09-04 | 초기 정의 (초안 참조 + 상세화) | GPT-5 |
